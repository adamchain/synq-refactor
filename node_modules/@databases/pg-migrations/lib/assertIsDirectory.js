"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

const fs_1 = require("fs");

const path_1 = require("path");

const chalk = require("chalk");

function assertIsDirectory(path, mode) {
  try {
    if (fs_1.statSync(path).isDirectory()) return path_1.resolve(path);
  } catch (ex) {// treat errors the same as non-directories
  }

  switch (mode) {
    case 'exit':
      console.error(`${chalk.cyan(path)} is not a valid directory. The directory can either be passed via the "--directory" CLI parameter or specified via the "migrationsDirectory" config value.`);
      return process.exit(1);

    case 'throw':
      throw new Error(`${path} is not a valid directory`);
  }
}

exports.default = assertIsDirectory;